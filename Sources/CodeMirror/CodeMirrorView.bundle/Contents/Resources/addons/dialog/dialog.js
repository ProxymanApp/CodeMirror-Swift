'use strict';(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function m(b,g,a){b=b.getWrapperElement();var d=b.appendChild(document.createElement("div"));d.className=a?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof g?d.innerHTML=g:d.appendChild(g);c.addClass(b,"dialog-opened");return d}function n(b,
g){b.state.currentNotificationClose&&b.state.currentNotificationClose();b.state.currentNotificationClose=g}c.defineExtension("openDialog",function(b,g,a){function d(e){if("string"==typeof e)f.value=e;else if(!k&&(k=!0,c.rmClass(h.parentNode,"dialog-opened"),h.parentNode.removeChild(h),l.focus(),a.onClose))a.onClose(h)}a||(a={});n(this,null);var h=m(this,b,a.bottom),k=!1,l=this,f=h.getElementsByTagName("input")[0];if(f){f.focus();a.value&&(f.value=a.value,!1!==a.selectValueOnOpen&&f.select());if(a.onInput)c.on(f,
"input",function(e){a.onInput(e,f.value,d)});if(a.onKeyUp)c.on(f,"keyup",function(e){a.onKeyUp(e,f.value,d)});c.on(f,"keydown",function(e){if(!(a&&a.onKeyDown&&a.onKeyDown(e,f.value,d))){if(27==e.keyCode||!1!==a.closeOnEnter&&13==e.keyCode)f.blur(),c.e_stop(e),d();13==e.keyCode&&g(f.value,e)}});if(!1!==a.closeOnBlur)c.on(h,"focusout",function(e){null!==e.relatedTarget&&d()})}else if(b=h.getElementsByTagName("button")[0]){c.on(b,"click",function(){d();l.focus()});if(!1!==a.closeOnBlur)c.on(b,"blur",
d);b.focus()}return d});c.defineExtension("openConfirm",function(b,g,a){function d(){k||(k=!0,c.rmClass(h.parentNode,"dialog-opened"),h.parentNode.removeChild(h),l.focus())}n(this,null);var h=m(this,b,a&&a.bottom);b=h.getElementsByTagName("button");var k=!1,l=this,f=1;b[0].focus();for(a=0;a<b.length;++a){var e=b[a];(function(p){c.on(e,"click",function(q){c.e_preventDefault(q);d();p&&p(l)})})(g[a]);c.on(e,"blur",function(){--f;setTimeout(function(){0>=f&&d()},200)});c.on(e,"focus",function(){++f})}});
c.defineExtension("openNotification",function(b,g){function a(){h||(h=!0,clearTimeout(k),c.rmClass(d.parentNode,"dialog-opened"),d.parentNode.removeChild(d))}n(this,a);var d=m(this,b,g&&g.bottom),h=!1,k;b=g&&"undefined"!==typeof g.duration?g.duration:5E3;c.on(d,"click",function(l){c.e_preventDefault(l);a()});b&&(k=setTimeout(a,b));return a})});
