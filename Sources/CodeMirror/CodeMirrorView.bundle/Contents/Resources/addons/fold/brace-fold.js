'use strict';(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){b.registerHelper("fold","brace",function(c,d){function k(w){for(var m=d.ch,u=0;;)if(m=0>=m?-1:f.lastIndexOf(w,m-1),-1==m){if(1==u)break;u=1;m=f.length}else{if(1==u&&m<d.ch)break;l=c.getTokenTypeAt(b.Pos(g,m+1));if(!/^(comment|string)/.test(l))return m+1;--m}}var g=d.line,f=c.getLine(g),l,
a=k("{"),e=k("[");if(null!=a&&(null==e||e>a)){var n=a;a="{";e="}"}else if(null!=e)n=e,a="[",e="]";else return;var q=1,x=c.lastLine(),p=g;a:for(;p<=x;++p)for(var r=c.getLine(p),h=p==g?n:0;;){var t=r.indexOf(a,h);h=r.indexOf(e,h);0>t&&(t=r.length);0>h&&(h=r.length);h=Math.min(t,h);if(h==r.length)break;if(c.getTokenTypeAt(b.Pos(p,h+1))==l)if(h==t)++q;else if(!--q){var v=p;var y=h;break a}++h}if(null!=v&&g!=v)return{from:b.Pos(g,n),to:b.Pos(v,y)}});b.registerHelper("fold","import",function(c,d){function k(a){if(a<
c.firstLine()||a>c.lastLine())return null;var e=c.getTokenAt(b.Pos(a,1));/\S/.test(e.string)||(e=c.getTokenAt(b.Pos(a,e.end+1)));if("keyword"!=e.type||"import"!=e.string)return null;var n=a;for(a=Math.min(c.lastLine(),a+10);n<=a;++n){var q=c.getLine(n).indexOf(";");if(-1!=q)return{startCh:e.end,end:b.Pos(n,q)}}}d=d.line;var g=k(d),f;if(!g||k(d-1)||(f=k(d-2))&&f.end.line==d-1)return null;for(f=g.end;;){var l=k(f.line+1);if(null==l)break;f=l.end}return{from:c.clipPos(b.Pos(d,g.startCh+1)),to:f}});b.registerHelper("fold",
"include",function(c,d){function k(l){if(l<c.firstLine()||l>c.lastLine())return null;var a=c.getTokenAt(b.Pos(l,1));/\S/.test(a.string)||(a=c.getTokenAt(b.Pos(l,a.end+1)));if("meta"==a.type&&"#include"==a.string.slice(0,8))return a.start+8}d=d.line;var g=k(d);if(null==g||null!=k(d-1))return null;for(var f=d;null!=k(f+1);)++f;return{from:b.Pos(d,g+1),to:c.clipPos(b.Pos(f))}})});
